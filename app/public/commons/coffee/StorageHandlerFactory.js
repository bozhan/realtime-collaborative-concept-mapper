"use strict";var _base,_base1,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function o(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};null==window.ils&&(window.ils={}),null==(_base=window.ils).storage&&(_base.storage={}),null==(_base1=window.ils.storage).memory&&(_base1.memory={}),window.ils.storage.StorageHandler=function(){function t(t,e,o,n){this.createResource=__bind(this.createResource,this),this.getResourceBundle=__bind(this.getResourceBundle,this),this.setProvider=__bind(this.setProvider,this),this.getProvider=__bind(this.getProvider,this),this.setGenerator=__bind(this.setGenerator,this),this.getGenerator=__bind(this.getGenerator,this),this.setTarget=__bind(this.setTarget,this),this.getTarget=__bind(this.getTarget,this),this.setActor=__bind(this.setActor,this),this.getActor=__bind(this.getActor,this),console.log("Initializing StorageHandler."),this._debug=!0,this._actor=t,this._target=e,this._generator=o,this._provider=n}return t.prototype.getActor=function(){return this._actor},t.prototype.setActor=function(t){return this._actor=t,this},t.prototype.getTarget=function(){return this._target,this},t.prototype.setTarget=function(t){return this._target=t},t.prototype.getGenerator=function(){return this._generator,this},t.prototype.setGenerator=function(t){return this._generator=t},t.prototype.getProvider=function(){return this._provider,this},t.prototype.setProvider=function(t){return this._provider=t},t.prototype.getResourceBundle=function(t){var e;return e={},e.id=ut.commons.utils.generateUUID(),e.metadata={},e.metadata.published=(new Date).toISOString(),e.metadata.author=this._actor,e.metadata.target=this._target,e.metadata.generator=this._generator,e.metadata.provider=this._provider,e.content=t,e},t.prototype.readResource=function(){throw"Abtract function - implement in subclass."},t.prototype.createResource=function(){throw"Abtract function - implement in subclass."},t.prototype.updateResource=function(){throw"Abtract function - implement in subclass."},t.prototype.listResourceIds=function(){throw"Abtract function - implement in subclass."},t}(),window.ils.storage.MemoryStorageHandler=function(t){function e(){this.createResource=__bind(this.createResource,this),e.__super__.constructor.apply(this,arguments),console.log("Initializing MemoryStorageHandler.")}return __extends(e,t),e.prototype.readResource=function(t){return window.ils.storage.memory[t]?(this._debug&&console.log("MemoryStorage: readResource "+t),window.ils.storage.memory[t]):(this._debug&&console.log("MemoryStorage: readResource "+t+" not found."),void 0)},e.prototype.createResource=function(t){var e,o;try{return o=this.getResourceBundle(t),window.ils.storage.memory[o.id]?(this._debug&&console.log("MemoryStorage: resource already exists! "+o.id),void 0):(window.ils.storage.memory[o.id]=o,this._debug&&console.log("MemoryStorage: resource created: "+o),this._debug&&console.log(o),o)}catch(n){return e=n,this._debug&&console.log("MemoryStorage: resource NOT created: "+e),void 0}},e.prototype.updateResource=function(t,e){var o;return window.ils.storage.memory[t]?(o=this.getResourceBundle(e),window.ils.storage.memory[t]=o,console.log("MemoryStorage: updateResource "+t),o):(console.log("MemoryStorage: updateResource failed, resource doesn't exist: "+t),void 0)},e.prototype.listResourceIds=function(){var t,e,o,n;o=window.ils.storage.memory,n=[];for(t in o)e=o[t],n.push(t);return n},e}(window.ils.storage.StorageHandler);