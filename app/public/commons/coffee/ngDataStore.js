"use strict";var angular,dummy;window.ut=window.ut||{},ut.commons=ut.commons||{},angular=window.angular,dummy={loadDataFromJson:null},ut.commons.golabUtils.directive("datastoreselection",function(t){return{restrict:"E",template:'<table width="100%">\n    <tr>\n        <td>\n            Category:\n            <select ng-model="selectedCategory"\n                    ng-options="category for category in dataStore.getCategories()">\n            </select>\n            <br/>\n            Data:\n            <select ng-model="selectedData" ng-options="data.title for data in getDatas()">\n            </select>\n        </td>\n        <td align="right">\n            <button ng-click="reload()">reload</button>\n            <br/>\n            <button ng-click="clearData()">clear</button>\n        </td>\n    </tr>\n</table>',replace:!0,link:function(e,o,n){var r,i,a,c,s,l,p;if(r=ut.commons.utils.getAttributeValue(n,"dataStoreName"),null===r)throw Error("attribute dataStoreName is not defined");if(c=""+r+"_selectedCategory",p=""+r+"_selectedDataTitle",!e[r])throw Error("cannot find data store, named '"+r+"' on the scope");return e.dataStore=e[r],e.selectedCategory=t.get(c),e.selectedData="",e.selectedCategory?(l=t.get(p),l&&(s=e.dataStore.getData(e.selectedCategory,l)),s&&(e.selectedData=s)):e.selectedCategory="",e.getDatas=function(){return e.dataStore.getDatas(e.selectedCategory)},i=!1,e.$watch("selectedCategory",function(){return t.set(c,e.selectedCategory),i?e.selectedData="":i=!0}),a=function(){return e.selectedCategory&&e.selectedData?(console.log("load data: category "+e.selectedCategory+", data "+e.selectedData.title),e.dataStore.sendLoadEvent(e.selectedData)):void 0},e.$watch("selectedData",function(){return t.set(p,e.selectedData.title),a()}),e.reload=function(){return a()}}}});